<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Путь Итами</title>
  <style>
    body {
      margin: 0;
      font-family: 'Georgia', serif;
      color: #fff;
      background-color: #000;
      background-repeat: no-repeat;
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
    }
    .container {
      max-width: 800px;
      margin: 5vh auto;
      background: rgba(0, 0, 0, 0.6);
      padding: 2em;
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
    }
    .message {
      margin-bottom: 1.5em;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }
    .message.visible {
      opacity: 1;
    }
    button {
      display: block;
      margin: 1em auto;
      padding: 1em 2em;
      font-size: 1em;
      background: #333;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: #555;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="game"></div>
  </div>
  <script>
    const gameElement = document.getElementById("game");

    const gameData = [
  // Сцена 1 — Водопад Очищения
  {
    steps: [
      { text: "Дух: Итами просыпайся! Итамиии... ты впорядке?", button: "Проснуться", bg: "backgrounds/waterfall.jpg" },
      { text: "Дух: Хух, я волновался что уже не получилось. Добро пожаловать. Нам с тобой предстоит пройти небольшое приключение и отыскать кое-что оставленное тебе в этом месте.", button: "Осмотреться вокруг" },
      { text: "Дух: Сейчас мы находимся у водопада очищения. Это место служит защитной стеной, здесь нет обходных путей или горных проходов. Путь только один — через водопад. Если что-то посчитается ненужным, оно будет раздавлено непрерывным потоком. Раньше его тут не было, была просто тропа. Ой! нужно поторопиться, у нас не так много времени.", button: "Проследовать за духом сквозь водопад", nextScene: 1 }
    ]
  },
  // Сцена 2 — Астрономическая Степь
  {
    steps: [
      {
        text: "Дух: Место, где мысли и мечты отображаются в виде звёзд. Если коснуться отражения звезды на воде, можно узнать, что она значит. Но не каждый может устоять... Видишь замок? Там находится то, что привело тебя сюда. Хочешь попробовать коснуться звезды или пойдём дальше?",
        choices: [
          { label: "Ступить на воду и попытаться коснуться звезды", nextStep: 1 },
          { label: "Следовать дальше по пути к Замку", nextStep: 3 }
        ],
        bg: "backgrounds/starfield.jpg"
      },
      {
        text: "Ступив аккуратно на поверхность воды, ты чувствуешь, что она держит тебя. Ты касаешься звезды. Она показывает искреннее желание Вишеда прожить всю жизнь с человеком по имени Итами. Звезда начинает светиться и улетает по небу.", button: "Продолжить", nextStep: 2
      },
      {
        text: "Дух: Удивительно, но кажется это была твоя звезда. Пойдём дальше, у нас не так много времени сейчас. Думаю, в будущем ты сможешь вернуться и разобраться здесь подробнее.", button: "Идти к замку", nextStep: 3
      },
      { text: "Переход к замку...", button: "Войти в замок", nextScene: 2 }
    ]
  },
  // Сцена 3 — Зал Испытаний
  {
    steps: [
      { text: "Дух: Большой зал с множеством испытаний. Нельзя пройти дальше не пройдя испытание.", button: "Узнать своё испытание", bg: "backgrounds/trial_corridor.jpg" },
      { text: "Дух: Похоже, для тебя выпало испытание знаний. Чтобы пройти дальше, нужно ответить на 4 вопроса.", button: "Я готова, начинаем!" },
      {
        text: "Вопрос: В каком игровом мире зародилось начало начал самого дорогого, что есть у Вишеда?",
        choices: [
          { label: "Black Desert", nextStep: 3 },
          { label: "Throne and Liberty", nextStep: 3 },
          { label: "World of Warcraft", nextStep: 3 },
          { label: "Rust", nextStep: 3 }
        ]
      },
      {
        text: "Вопрос: Число, что стало причиной волнений и страха, но дало толчок чему-то невероятному...",
        choices: [
          { label: "69", nextStep: 4 },
          { label: "8.5", nextStep: 4 },
          { label: "496", nextStep: 4 },
          { label: "520", nextStep: 4 }
        ]
      },
      {
        text: "Вопрос: Смертельная битва... Современный 'гладиатор' не горбатый, не рогатый, он бесстрашный терминатор. 
Руки словно 'Биты', ногти словно 'Бритвы'. 
Он покажет хвост дракона, вам удар ногой коронный, и покажет хватку 'Тигра'. 
'Гладиатор' бесcмертный бой.",
        button: "Продолжить"
      },
      {
        text: "Вопрос: Какое мифическое существо почувствует особую энергию к Вишеду?",
        choices: [
          { label: "Дракон", nextStep: 6 },
          { label: "Единорог", nextStep: 6 },
          { label: "Вампир", nextStep: 6 },
          { label: "Минотавр", nextStep: 6 }
        ]
      },
      {
        text: "Дух: Не сомневался в тебе ни секунды! Похоже, нам открылся путь дальше. Потрясающе, мы успеваем!",
        button: "Проследовать за духом", nextScene: 3
      }
    ]
  },
  // Сцена 4 — Огненный зал
  {
    steps: [
      { text: "Дух: Моё одно из любимых мест. Эмоции принимают форму огня. Пламя, которое не ранит, если коснуться его — можно почувствовать его суть. В центре горит гигантский огонь...", button: "Прикоснуться к самому большому пламени рукой", nextStep: 1, bg: "backgrounds/fire_hall.jpg" },
      { text: "Ты чувствуешь, что это огромное пламя — чувства Вишеда. Его любовь и желание разделить с тобой всю жизнь.", button: "Пройти дальше в поисках пути", nextStep: 2 },
      { text: "Дух: Мы уже почти пришли. Осталось только пройти одно место… не самое моё любимое. Но с тобой — я ничего не боюсь!", button: "Продолжить", nextScene: 4 }
    ]
  },
  // Сцена 5 — Тропа Сомнений
  {
    steps: [
      { text: "Дух: Это место никогда не меняется... Туман, силуэты, страхи. Они нападают, если почувствуют их в тебе.", button: "Пройти свой путь по тропе", nextStep: 1, bg: "backgrounds/doubt_path_misty.jpg" },
      { text: "Дух: Но тебя они не трогают. Даже самые ужасные молча наблюдают. Один силуэт… он как будто спит...", choices: [
        { label: "Коснуться спящего силуэта", nextStep: 2 },
        { label: "Пройти в Animae", nextStep: 3 }
      ] },
      { text: "Ты чувствуешь, что это — спящий страх Вишеда потерять Итами. Он спит. Он есть, но не властвует.", button: "Пройти в Animae", nextStep: 3 },
      { text: "Ты чувствуешь приближение особенного места...", button: "Войти в Animae", nextScene: 5 }
    ]
  },
  // Сцена 6 — Animae
  {
    steps: [
      { text: "Дух: Здесь я должен вернуться на своё место. Спасибо тебе. Хоть и прощаемся мы ненадолго.", button: "Исследовать это странное место...", nextStep: 1, bg: "backgrounds/animae.jpg" },
      { text: "Ты чувствуешь спокойствие и тепло. Лёгкий ветер доносит звуки. Пройдя немного вперёд, ты видишь стол, на котором что-то есть.", button: "Подойти к столу", nextStep: 2 },
      { text: "Ты видишь маленькую коробку. Без замков. Прикоснувшись к ней, ты чувствуешь тепло.", button: "Взять коробку в руки", nextStep: 3 },
      { text: "Под ней записка. 
\"Любимая Итами. Сегодня твой День рождения... Возможно этот подарок не так ценен материально, но я отдаю тебе свою душу... Пока что — частичку. Она будет рядом, будет греть тебя, будет помогать. Когда мы вновь будем рядом — я отдам тебе всё. Навсегда. Я бесконечно благодарен тебе. Люблю тебя.\"", button: "Вернуться на Тропу Сомнений", nextScene: 6 }
    ]
  },
  // Сцена 7 — Возвращение
  {
    steps: [
      { text: "Ты возвращаешься на Тропу Сомнений. В её конце ты видишь выход...", button: "Пройти по тропе к выходу", nextStep: 1, bg: "backgrounds/doubt_path_clear.jpg" },
      { text: "Туман рассеялся. Духи исчезли. То, что раньше мешало — ушло. Они больше не нужны.", button: "Покинуть Тропу", nextStep: 2 },
      { text: "Ты просыпаешься у себя дома. Всё было как сон… Но рядом с тобой лежит та самая коробка...", button: "Конец" }
    ]
  }
];

    let currentScene = 0;
    let currentStep = 0;

    function showStep() {
      const scene = gameData[currentScene];
      const step = scene.steps[currentStep];
      if (!step) return;

      if (step.bg) {
        document.body.style.backgroundImage = `url('${step.bg}')`;
      }

      const msg = document.createElement("div");
      msg.className = "message";
      msg.innerHTML = step.text;
      gameElement.appendChild(msg);
      setTimeout(() => msg.classList.add("visible"), 50);

      if (step.choices) {
        step.choices.forEach(choice => {
          const btn = document.createElement("button");
          btn.textContent = choice.label;
          btn.onclick = () => {
            currentScene = choice.nextScene ?? currentScene;
            currentStep = choice.nextStep ?? currentStep + 1;
            gameElement.innerHTML = "";
            showStep();
          };
          gameElement.appendChild(btn);
        });
      } else {
        const btn = document.createElement("button");
        btn.textContent = step.button ?? "Далее";
        btn.onclick = () => {
          currentStep++;
          gameElement.innerHTML = "";
          showStep();
        };
        gameElement.appendChild(btn);
      }
    }

    showStep();
  </script>
</body>
</html>
